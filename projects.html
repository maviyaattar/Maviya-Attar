<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Projects | Maviya Attar</title>
<meta name="description" content="Browse through Maviya Attar's portfolio projects including web development, AI, automation, and security projects.">

<style>
:root{
  --primary:hsl(250,66%,75%);
  --bg:#0f1220;
  --card:#1a1d33;
  --text:#fff;
  --transition: all 0.3s ease;
}

.light{
  --bg:#fff;
  --card:#f4f4f9;
  --text:#1a1d33;
}

*{
  box-sizing:border-box;
  font-family:Poppins,system-ui;
  margin: 0;
  padding: 0;
}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  padding:16px;
  transition: background-color 0.4s ease, color 0.4s ease;
  line-height: 1.6;
}

header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:24px;
  padding: 16px 0;
  animation: fadeInDown 0.6s ease-out;
}

header h3 {
  font-size: 1.5rem;
  color: var(--primary);
  margin: 0;
}

header div {
  display: flex;
  align-items: center;
  gap: 16px;
}

button{
  border:none;
  padding:10px 16px;
  border-radius:24px;
  background:var(--card);
  color:var(--text);
  cursor:pointer;
  font-size: 1.2rem;
  transition: transform 0.3s ease, background-color 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

button:hover {
  transform: scale(1.1) rotate(15deg);
  background: var(--primary);
  color: #000;
}

button:active {
  transform: scale(0.95);
}

header a {
  color: var(--primary);
  text-decoration: none;
  font-weight: 600;
  transition: opacity 0.3s ease, transform 0.3s ease;
  display: inline-block;
}

header a:hover {
  opacity: 0.8;
  transform: translateY(-2px);
}

.filters{
  display:flex;
  gap:10px;
  overflow-x:auto;
  margin-bottom:20px;
  padding-bottom: 8px;
  animation: fadeInUp 0.6s ease-out 0.2s both;
}

.filters::-webkit-scrollbar {
  height: 4px;
}

.filters::-webkit-scrollbar-thumb {
  background: var(--primary);
  border-radius: 4px;
}

.filters button{
  white-space: nowrap;
  font-size: 0.9rem;
  padding: 8px 16px;
}

.filters button.active{
  background:var(--primary);
  color:#000;
  font-weight: 600;
}

.search{
  margin-bottom:20px;
  animation: fadeInUp 0.6s ease-out 0.3s both;
}

.search input{
  width:100%;
  padding:12px 16px;
  border-radius:12px;
  border:2px solid var(--card);
  background:var(--card);
  color:var(--text);
  font-size: 1rem;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

.search input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 4px 12px hsla(250, 66%, 75%, 0.2);
}

.grid{
  display:grid;
  gap:20px;
  animation: fadeInUp 0.8s ease-out 0.4s both;
}

@media(min-width:640px){
  .grid{grid-template-columns:repeat(2,1fr)}
}

@media(min-width:900px){
  .grid{grid-template-columns:repeat(3,1fr)}
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
  overflow: hidden;
  position: relative;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  transition: left 0.5s ease;
}

.card:hover::before {
  left: 100%;
}

.card:hover {
  transform: translateY(-8px);
  box-shadow: 0 12px 32px hsla(250, 66%, 75%, 0.25);
}

.card img{
  width:100%;
  border-radius:12px;
  margin-bottom: 12px;
  transition: transform 0.3s ease;
}

.card:hover img {
  transform: scale(1.05);
}

.card h4 {
  margin: 8px 0;
  color: var(--text);
  font-size: 1.1rem;
}

.card small {
  color: var(--primary);
  font-weight: 600;
  font-size: 0.85rem;
}

.card p {
  margin: 12px 0;
  color: var(--text);
  opacity: 0.9;
  font-size: 0.9rem;
}

.actions{
  margin-top: 12px;
}

.actions a{
  display:inline-block;
  margin-right:10px;
  margin-top:8px;
  padding:8px 16px;
  background:var(--primary);
  color:#000;
  text-decoration:none;
  border-radius:24px;
  font-weight:600;
  font-size: 0.85rem;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.actions a:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px hsla(250, 66%, 75%, 0.4);
}

.actions a:active {
  transform: translateY(0);
}

/* Animations */
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Loading state */
.loading {
  text-align: center;
  padding: 40px;
  color: var(--primary);
  font-size: 1.2rem;
}

/* Error state */
.error {
  text-align: center;
  padding: 40px;
  color: #ff6b6b;
  font-size: 1.1rem;
}
</style>
</head>

<body>

<header>
  <h3>Projects Portfolio</h3>
  <div>
    <button onclick="toggleMode()" aria-label="Toggle dark/light theme">üåó</button>
    <a href="index.html">‚Üê Home</a>
  </div>
</header>

<div class="filters" role="group" aria-label="Project filters">
  <button class="active" data="all" aria-pressed="true">All</button>
  <button data="static" aria-pressed="false">Static</button>
  <button data="fullstack" aria-pressed="false">Fullstack</button>
  <button data="ai" aria-pressed="false">AI</button>
  <button data="automation" aria-pressed="false">Automation</button>
  <button data="hacking" aria-pressed="false">Hacking</button>
</div>

<div class="search">
  <input id="search" type="search" placeholder="Search projects..." aria-label="Search projects">
</div>

<div class="grid" id="list" role="list">
  <div class="loading">Loading projects...</div>
</div>
<script>
const API = "https://portfolio-backend-api-8me4.onrender.com/projects";

const list = document.getElementById("list");
const search = document.getElementById("search");
const btns = document.querySelectorAll(".filters button");

let allProjects = [];
let currentCategory = "all";

/* MODE TOGGLE */
function toggleMode(){
  document.body.classList.toggle("light");
  localStorage.setItem(
    "mode",
    document.body.classList.contains("light") ? "light" : "dark"
  );
}
if(localStorage.getItem("mode") === "light"){
  document.body.classList.add("light");
}

/* LOAD PROJECTS */
fetch(API)
  .then(res => {
    if (!res.ok) throw new Error("Failed to fetch projects");
    return res.json();
  })
  .then(data => {
    allProjects = data;
    renderProjects();
  })
  .catch(err => {
    console.error(err);
    list.innerHTML = '<p class="error">‚ùå Failed to load projects. Please try again later.</p>';
  });

/* CATEGORY FILTER */
btns.forEach(btn => {
  btn.addEventListener("click", () => {
    btns.forEach(b => {
      b.classList.remove("active");
      b.setAttribute("aria-pressed", "false");
    });
    btn.classList.add("active");
    btn.setAttribute("aria-pressed", "true");
    currentCategory = btn.getAttribute("data");
    renderProjects();
  });
});

/* SEARCH */
search.addEventListener("input", renderProjects);

/* RENDER PROJECTS (IMAGE OPTIONAL + MULTI CATEGORY SAFE) */
function renderProjects(){
  const query = search.value.toLowerCase().trim();
  list.innerHTML = "";

  const filtered = allProjects
    .filter(p => {
      if (currentCategory === "all") return true;
      if (Array.isArray(p.categories)) {
        return p.categories.includes(currentCategory);
      }
      return p.category === currentCategory;
    })
    .filter(p => p.name.toLowerCase().includes(query));

  if(filtered.length === 0){
    list.innerHTML = '<p class="error">No projects found matching your criteria.</p>';
    return;
  }

  filtered.forEach(p => {
    const card = document.createElement('div');
    card.className = 'card';
    card.setAttribute('role', 'listitem');
    
    // Create elements safely to prevent XSS
    if (p.image) {
      const img = document.createElement('img');
      img.src = p.image;
      img.alt = p.name || 'Project image';
      img.loading = 'lazy';
      card.appendChild(img);
    }
    
    const title = document.createElement('h4');
    title.textContent = p.name || 'Untitled Project';
    card.appendChild(title);
    
    const stack = document.createElement('small');
    stack.textContent = p.stack || 'Project';
    card.appendChild(stack);
    
    const description = document.createElement('p');
    description.textContent = p.description || 'No description available.';
    card.appendChild(description);
    
    const actions = document.createElement('div');
    actions.className = 'actions';
    
    if (p.liveLink) {
      const liveLink = document.createElement('a');
      liveLink.href = p.liveLink;
      liveLink.target = '_blank';
      liveLink.rel = 'noopener noreferrer';
      liveLink.textContent = 'Live Demo';
      actions.appendChild(liveLink);
    }
    
    if (p.sourceLink) {
      const sourceLink = document.createElement('a');
      sourceLink.href = p.sourceLink;
      sourceLink.target = '_blank';
      sourceLink.rel = 'noopener noreferrer';
      sourceLink.textContent = 'Source Code';
      actions.appendChild(sourceLink);
    }
    
    if (p.liveLink || p.sourceLink) {
      card.appendChild(actions);
    }
    
    list.appendChild(card);
  });
}
</script>
</body>
</html>
